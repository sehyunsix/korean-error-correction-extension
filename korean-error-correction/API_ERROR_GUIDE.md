# Gemini API 오류 해결 가이드

## 📋 오류 로그 확인 방법

Gemini API 오류가 발생하면 콘솔에 자세한 정보가 출력됩니다.

### 콘솔 열기
- **웹페이지**: F12 또는 Cmd+Option+I → Console 탭
- **팝업**: 팝업에서 마우스 오른쪽 클릭 → 검사

## 🔍 오류 로그 예시

```
================================================================================
❌❌❌ Gemini API 오류 상세 정보 ❌❌❌
================================================================================
🔗 요청 URL: https://generativelanguage.googleapis.com/v1beta/models/gemini-flash-lite-latest:generateContent
📊 상태 코드: 404 (Not Found)
📝 모델: gemini-flash-lite-latest (기본)
📄 오류 내용:
{
  "error": {
    "code": 404,
    "message": "models/gemini-flash-lite-latest is not found",
    "status": "NOT_FOUND"
  }
}
================================================================================

💡 해결 방법:
   1. 모델 이름이 올바른지 확인하세요
   2. 팝업에서 "🔄" 버튼을 눌러 사용 가능한 모델 목록을 다시 불러오세요
   3. API Key가 해당 모델에 대한 권한이 있는지 확인하세요
```

## 🚨 주요 오류 코드 및 해결 방법

### 404 Not Found
**원인**: 모델을 찾을 수 없습니다.

**해결 방법**:
1. 확장 프로그램 팝업 열기
2. Gemini API 설정 섹션으로 스크롤
3. 🔄 버튼 클릭 → 사용 가능한 모델 목록 다시 불러오기
4. 드롭다운에서 다른 모델 선택
5. 추천 모델:
   - `gemini-1.5-flash-latest`
   - `gemini-1.5-flash-8b-latest`
   - `gemini-1.5-pro-latest`

### 403 Forbidden
**원인**: API Key 권한 오류

**해결 방법**:
1. https://aistudio.google.com/app/apikey 접속
2. API Key가 유효한지 확인
3. 새 API Key 생성 (필요시)
4. 확장 프로그램 팝업에서 API Key 재입력
5. "저장" 버튼 클릭

### 429 Too Many Requests
**원인**: API 호출 한도 초과

**해결 방법**:
1. 잠시 후 (1-5분) 다시 시도
2. 무료 Tier 한도:
   - 분당 요청 수 제한
   - 일일 요청 수 제한
3. 한도 확인: https://ai.google.dev/pricing

### 400 Bad Request
**원인**: 잘못된 요청 형식

**해결 방법**:
1. 콘솔에서 오류 메시지 확인
2. 모델 선택 다시 하기
3. 확장 프로그램 새로고침
4. 문제 지속 시 Issue 등록

### 500 Internal Server Error
**원인**: Google 서버 오류

**해결 방법**:
1. 일시적인 문제일 가능성 높음
2. 5-10분 후 다시 시도
3. Google Cloud Status 확인: https://status.cloud.google.com/

## 📊 로그에 포함된 정보

오류 발생 시 다음 정보가 자동으로 출력됩니다:

1. **요청 URL**: 어떤 엔드포인트를 호출했는지
2. **상태 코드**: HTTP 상태 코드 (404, 403 등)
3. **사용한 모델**: 어떤 모델을 사용하려고 했는지
4. **오류 응답 본문**: Google API가 반환한 상세 오류 메시지
5. **해결 방법**: 해당 오류에 대한 구체적인 해결 방법

## 🛠️ 일반적인 해결 절차

### 1단계: 콘솔 로그 확인
```
F12 → Console 탭
→ 빨간색 오류 메시지 찾기
→ "❌❌❌ Gemini API 오류 상세 정보" 섹션 확인
```

### 2단계: 상태 코드에 따라 조치
- **404**: 모델 목록 새로고침 후 다른 모델 선택
- **403**: API Key 재확인 및 재입력
- **429**: 잠시 대기 후 재시도
- **500**: Google 서버 문제, 나중에 재시도

### 3단계: 확장 프로그램 새로고침
```
chrome://extensions/
→ "한글 맞춤법 검사기" 찾기
→ 🔄 새로고침 버튼 클릭
```

### 4단계: 웹페이지 새로고침
```
F5 또는 Cmd+R
```

### 5단계: 재시도
- 텍스트 선택
- Cmd+Shift+E 단축키
- 또는 팝업에서 "교정하기" 버튼

## 💡 예방 팁

1. **안정적인 모델 사용**
   - `gemini-1.5-flash-latest` (권장)
   - `gemini-1.5-flash-8b-latest` (빠름)
   - `gemini-1.5-pro-latest` (정확도 높음)

2. **API Key 정기 확인**
   - 주기적으로 https://aistudio.google.com/app/apikey 확인
   - 만료되거나 비활성화된 Key 제거

3. **사용량 모니터링**
   - 무료 Tier 한도 주의
   - 필요 시 유료 플랜 고려

4. **로그 모니터링**
   - 콘솔을 열어두고 사용
   - 오류 발생 시 즉시 확인

## 🔧 디버깅 모드

더 자세한 로그를 보려면:

1. **콘솔에서 확인할 내용**:
   ```
   📤 API 요청 URL: https://...?key=***
   📥 API 응답 상태: 200 OK
   ✅ Gemini 응답: {"errors": [], ...}
   ✅ 파싱된 결과: {...}
   ```

2. **네트워크 탭 확인**:
   ```
   F12 → Network 탭
   → "generateContent" 검색
   → 요청/응답 상세 확인
   ```

## 📞 도움말

문제가 해결되지 않으면:

1. **콘솔 로그 스크린샷** 찍기
2. **사용한 모델명** 기록
3. **API Key 상태** 확인 (만료 여부)
4. Issue 등록 또는 문의

## 🎯 빠른 해결 체크리스트

- [ ] 콘솔에서 오류 상세 정보 확인
- [ ] 상태 코드 확인 (404/403/429/500)
- [ ] 모델 목록 새로고침 (🔄 버튼)
- [ ] 다른 모델 선택
- [ ] API Key 재확인
- [ ] 확장 프로그램 새로고침
- [ ] 웹페이지 새로고침
- [ ] 잠시 대기 후 재시도 (429 오류)
- [ ] Google Cloud Status 확인 (500 오류)

